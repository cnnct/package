# ant打包说明

> ### 打包目的
>
> > 通地ant打包，可以将框架代码发布给公司其它项目组同事进行开发。
>
> ### ant使用前提条件
>
> > 已分别执行过本手册中两个步骤：[01-静态资源压缩打包](/kuang-jia-da-bao/01jing-tai-zi-yuan-da-bao-jscsszip.md)，[02-java基础包混淆打包](/02-javaji-chu-bao-hun-yao-da-bao.md)   。
>
> ### build.xml文件
>
> > 此文件已经位于工程根目录，相关的属性及参数已配置好，一般是不需要进行修改，除非能灵活运用，且是有特殊新增加的目录或资源需要增加时，再进行适当调整。
>
> ### 打包形式有两种
>
> > * 一种是全量打包，用于某个新项目组需要新开发一个项目时使用。打包后的文件就是一个eclipse的源码工程，但是对关键底层的资源文件进行了混淆及压缩处理
> >
> > * 一种是增量打包，用于原来已经使用过此框架进行过开发的项目，由于框架新增了一些组件功能，或修改了一些bug，需要更新升级使用，包含框架基础jar包+框架基础资源文件等。
>
> ### 打包执行命令
>
> build.xml的右键/run as/ant build.xml，具体build.xml文件使用方法，详见build.xml顶部注释。
>
> ### 打包规范
>
> > #### 目录规范
> >
> > * jar包输出目录：dist/x.y.z\[版本号\]/jar，用于存放对java基础包混淆打包后的jar包。作为下面打zip包和war包的必须资源。
> > * war包输出目录：dist/x.y.z\[版本号\]/war，用于存放增量更新包，增量更新升级用。
> > * zip包输出目录：dist/x.y.z\[版本号\]/zip，用于存放完整初次开发项目包，此项目可以直接在eclipse中导入进行开发。
> > * db数据脚本目录：dist/x.y.z\[版本号\]/zip，用于存放本版本相应的数据库脚本，1.0版本中包含基础库中的“01-结构.sql”、“02-数据.sql”，两个文件。后续版本中，则只需要增加数据库的增量变更脚本记录。
> >
> > #### 版本分支规范
> >
> > * 一旦版本确认需要出包，则保证打包文件完整输出，且数据库脚本也完整的前提下，通过svn进行分支标签的建立，尽量保证分支的完整性及静态性。svn的分支操作方法详见：[http://blog.csdn.net/vbirdbest/article/details/51122637](http://blog.csdn.net/vbirdbest/article/details/51122637)
> >
> > > * 操作方法：在eclipse右键/team/分支\(标记\)，打开操作框
> > > * 到URL：指向目录（其中x.y.z是版本号，会自动创建此目录，图中的utf-8编码忽略）：[https://183.129.148.83:8843/svn/IPM/互联网产品部/项目/管理平台2.0/2-源代码/manageplat\_tags/x.y.z](https://183.129.148.83:8843/svn/IPM/互联网产品部/项目/管理平台2.0/2-源代码/manageplat_tags)
> > > * Resources：此项不用修改
> > >
> > > ![](/assets/branch_tag.png)
>
> ### 打包规范\_2019-04-19更新（重点是指code代码包的说明）
>
> > ### code目录中要包含三个文件
> >
> > > ###### ①全量包
> > >
> > > ###### ②与上一版本的增量包
> > >
> > > ###### ③ 与上两个版本的增量包
> >
> > 示意图如下：![](/assets/code_dir.png)
> >
> > #### 全量包：
> >
> > > 使用ant打包
> >
> > #### 增量包：
> >
> > > 1、使用Beyond Compare 4（该工具是收费使用，但有试用期，到期再重装下即可），比较目录，左侧加载旧版本，右侧加载新版本，
> > >
> > > 2、先选择【右边较新和右边独有项】，执行比较，再将右侧全选拷贝出来，作为增量文件包，![](/assets/upt_file.png)
> > >
> > > 将     将右边的比较结果全选，右键复制到文件夹，存储到**“从2.7升级到2.8”**目录中![](/assets/copy_to_1.png)再运行【左边独有】，作为需要删除的文件，同样方式复制到**“需要手动删除”**目录中

## 



